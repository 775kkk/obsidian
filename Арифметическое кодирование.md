## –ê—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ: –ü—Ä–∏–º–µ—Ä –Ω–∞ C

–ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä: –∫–æ–¥–∏—Ä—É–µ–º —Å—Ç—Ä–æ–∫—É "AAAAABBBBB" —Å —á–∞—Å—Ç–æ—Ç–∞–º–∏ A=0.5, B=0.5
---
### üí° –õ–æ–≥–∏–∫–∞:
- –°—Ç–∞—Ä—Ç: [0.0, 1.0)
- –ö–∞–∂–¥—ã–π A –¥–µ–ª–∏—Ç –¥–∏–∞–ø–∞–∑–æ–Ω –ø–æ–ø–æ–ª–∞–º –∏ –±–µ—Ä—ë—Ç [0.0, 0.5)
- –ö–∞–∂–¥—ã–π B –±–µ—Ä—ë—Ç [0.5, 1.0) –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ç–µ–∫—É—â–µ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞
---
### üíª –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ (—É–ø—Ä–æ—â—ë–Ω–Ω—ã–π, double-precision)

```c
#include <stdio.h>
#include <string.h>

double arithmetic_encode(const char* str) {
    double low = 0.0, high = 1.0, range;

    for (int i = 0; str[i]; i++) {
        range = high - low;
        if (str[i] == 'A') {
            high = low + range * 0.5;
            // low = low;
        } else if (str[i] == 'B') {
            low = low + range * 0.5;
            // high = high;
        }
    }
    return (low + high) / 2;
}

int main() {
    const char* message = "AAAAABBBBB";
    double code = arithmetic_encode(message);
    printf("Encoded value for '%s': %.17f\n", message, code);
    return 0;
}
```
---
### üßæ –ü—Ä–∏–º–µ—Ä–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
Encoded value for 'AAAAABBBBB': 0.49951171875000000
```
–≠—Ç–æ—Ç –∫–æ–¥ –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞–∫ "–∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ —Å–∂–∞—Ç–∏–µ" –¥–ª—è —Å—Ç—Ä–æ–∫–∏ `"AAAAABBBBB"`.

---
### üìå –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏: A = 0.5, B = 0.5
- –ú–æ–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö —á–∞—Å—Ç–æ—Ç, EOF-—Å–∏–º–≤–æ–ª–∞ –∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
==============================================================
==============================================================
## üîß –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ C (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç–æ—Ç–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞)
---
### üíª –ö–æ–¥
```c
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

#define MAX_SYMBOLS 256

typedef struct {
    unsigned char symbol;
    double probability;
    double cum_low;
    double cum_high;
} SymbolRange;

int compare_freq(const void* a, const void* b) {
    return ((int*)b)[1] - ((int*)a)[1];
}

double arithmetic_encode(const char* str, SymbolRange* ranges, int unique_count) {
    double low = 0.0, high = 1.0;

    for (int i = 0; str[i]; i++) {
        double range = high - low;
        for (int j = 0; j < unique_count; j++) {
            if (str[i] == ranges[j].symbol) {
                high = low + range * ranges[j].cum_high;
                low  = low + range * ranges[j].cum_low;
                break;
            }
        }
    }
    return (low + high) / 2;
}

int main() {
    const char* input = "AAAAABBBBB";
    int len = strlen(input);
    int freq[MAX_SYMBOLS] = {0};

    // 1. –ü–æ–¥—Å—á—ë—Ç —á–∞—Å—Ç–æ—Ç
    for (int i = 0; i < len; i++)
        freq[(unsigned char)input[i]]++;

    // 2. –°–±–æ—Ä —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
    int map[MAX_SYMBOLS][2], count = 0;
    for (int i = 0; i < MAX_SYMBOLS; i++) {
        if (freq[i]) {
            map[count][0] = i;
            map[count][1] = freq[i];
            count++;
        }
    }

    // 3. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —É–±—ã–≤–∞–Ω–∏—é —á–∞—Å—Ç–æ—Ç—ã (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –∫—Ä–∞—Å–∏–≤–æ)
    qsort(map, count, sizeof(map[0]), compare_freq);

    // 4. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫—É–º—É–ª—è—Ç–∏–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã
    SymbolRange ranges[count];
    double cum = 0.0;
    for (int i = 0; i < count; i++) {
        double p = (double)map[i][1] / len;
        ranges[i].symbol = (unsigned char)map[i][0];
        ranges[i].probability = p;
        ranges[i].cum_low = cum;
        ranges[i].cum_high = cum + p;
        cum += p;
    }

    // 5. –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
    double code = arithmetic_encode(input, ranges, count);
    printf("Encoded value for '%s': %.17f\\n", input, code);

    // 6. –í—ã–≤–æ–¥ —Ç–∞–±–ª–∏—Ü—ã
    printf("Symbol table:\\n");
    for (int i = 0; i < count; i++) {
        printf("'%c': %.3f [%.5f - %.5f)\\n",
            ranges[i].symbol,
            ranges[i].probability,
            ranges[i].cum_low,
            ranges[i].cum_high);
    }

    return 0;
}
```